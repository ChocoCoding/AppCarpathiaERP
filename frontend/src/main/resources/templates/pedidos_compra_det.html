<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Detalles de Pedido de Compra</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/estilos_pedidos_compra_det.css">

</head>
<body>
<header class="bg-secondary border-bottom custom-header">
    <div class="container">
        <div class="d-flex justify-content-between align-items-center py-3">
            <!-- Left side - Back arrow -->
            <div>
                <button class="btn btn-link p-0" title="Go back" onclick="PedidoCompraDetApp.goBack()">
                    <i class="bi bi-arrow-left header-icon fs-2"></i>
                    <span class="visually-hidden">Go back</span>
                </button>
            </div>

            <!-- Center - Home, Add, Search, Configuration -->
            <div class="d-flex align-items-center gap-3">
                <button class="btn btn-link p-0" title="Home" onclick="PedidoCompraDetApp.goHome()">
                    <i class="bi bi-house header-icon fs-2"></i>
                    <span class="visually-hidden">Home</span>
                </button>

                <div class="position-relative ">
                    <input type="text" id="search-input" class="form-control pe-5" placeholder="Search..." oninput="PedidoCompraDetApp.filtrarDetalles()">
                    <button class="search-button" title="Search" onclick="PedidoCompraDetApp.toggleSearch()">
                        <i class="bi bi-search"></i>
                        <span class="visually-hidden">Search</span>
                    </button>
                </div>

                <button class="btn btn-link p-0 filter-button" title="Configuration" onclick="PedidoCompraDetApp.toggleFilter()">
                    <i class="bi bi-gear header-icon fs-2"></i>
                    <span class="visually-hidden">Configuration</span>
                </button>
                <div class="search-container">
                    <div class="filter-container">
                        <label><input type="checkbox" name="columnFilter" value="2"> ID</label>
                        <label><input type="checkbox" name="columnFilter" value="3"> N¬∫ Operaci√≥n</label>
                        <label><input type="checkbox" name="columnFilter" value="4"> Contrato Compra</label>
                        <label><input type="checkbox" name="columnFilter" value="5"> Terminado</label>
                        <label><input type="checkbox" name="columnFilter" value="6"> Fact. Proveedor</label>
                        <label><input type="checkbox" name="columnFilter" value="7"> N¬∫ Fact. Flete</label>
                        <label><input type="checkbox" name="columnFilter" value="8"> Fecha Pago Flete</label>
                        <label><input type="checkbox" name="columnFilter" value="9"> N¬∫ BL</label>
                        <label><input type="checkbox" name="columnFilter" value="10"> Peso Neto Total</label>
                        <label><input type="checkbox" name="columnFilter" value="11"> Total Bultos</label>
                        <label><input type="checkbox" name="columnFilter" value="12"> Promedio</label>
                        <label><input type="checkbox" name="columnFilter" value="13"> Valor Compra Total</label>
                        <label><input type="checkbox" name="columnFilter" value="14"> Observaciones</label>
                        <label><input type="checkbox" name="columnFilter" value="15"> Status Pedido (T/P)</label>
                    </div>
                </div>
                <button class="btn btn-link p-0" title="Add new" onclick="PedidoCompraDetApp.crearPedidoCompraDet()">
                    <i class="bi bi-plus-lg header-icon fs-2"></i>
                    <span class="visually-hidden">Add new</span>
                </button>
                <button class="btn btn-link p-0" title="Save" onclick="PedidoCompraDetApp.guardarCambios()">
                    <i class="bi bi-save header-icon fs-2"></i>
                    <span class="visually-hidden">Save</span>
                </button>
            </div>

            <!-- Right side - Logout -->
            <div>
                <button class="btn btn-link p-0" title="Logout" onclick="PedidoCompraDetApp.logout()">
                    <i class="bi bi-box-arrow-right header-icon fs-2"></i>
                    <span class="visually-hidden">Logout</span>
                </button>
            </div>
        </div>
    </div>
</header>

<div class="table-container">
    <table>
        <thead>
        <tr>
            <th>Eliminar</th>
            <th class="sortable" onclick="PedidoCompraDetApp.sortTable('pedidoCompra.idPedidoCompra')">ID Pedido Compra</th>
            <th class="sortable" onclick="PedidoCompraDetApp.sortTable('nOperacion')">N¬∫ Operaci√≥n</th>
            <th class="sortable" onclick="PedidoCompraDetApp.sortTable('contratoCompra')">Contrato Compra</th>
            <th class="sortable" onclick="PedidoCompraDetApp.sortTable('terminado')">Terminado(S/N)</th>
            <th class="sortable" onclick="PedidoCompraDetApp.sortTable('factProveedor')">Fact. Proveedor</th>
            <th class="sortable" onclick="PedidoCompraDetApp.sortTable('nFactFlete')">N¬∫ Fact. Flete</th>
            <th class="sortable" onclick="PedidoCompraDetApp.sortTable('fechaPagoFlete')">Fecha Pago Flete</th>
            <th class="sortable" onclick="PedidoCompraDetApp.sortTable('nBl')">N¬∫ BL</th>
            <th class="sortable" onclick="PedidoCompraDetApp.sortTable('pesoNetoTotal')">Peso Neto Total</th>
            <th class="sortable" onclick="PedidoCompraDetApp.sortTable('totalBultos')">Total Bultos</th>
            <th class="sortable" onclick="PedidoCompraDetApp.sortTable('promedio')">Promedio</th>
            <th class="sortable" onclick="PedidoCompraDetApp.sortTable('valorCompraTotal')">Valor Compra Total</th>
            <th class="sortable" onclick="PedidoCompraDetApp.sortTable('observaciones')">Observaciones</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="detalle : ${detallesPedidoCompra}" th:data-id-pedido-compra-det="${detalle.idPedidoCompraDet}">
            <td>
                <button class="delete-button" th:onclick="'PedidoCompraDetApp.eliminarPedidoCompraDet(' + ${detalle.idPedidoCompraDet} + ')'">üóëÔ∏è</button>
            </td>
            <td contenteditable="true" class="editable" oninput="PedidoCompraDetApp.marcarModificado(this)" th:text="${detalle.idPedidoCompra}">ID Pedido Compra</td>
            <td contenteditable="true" class="editable" oninput="PedidoCompraDetApp.marcarModificado(this)" th:text="${detalle.n_operacion}">N¬∫ Operaci√≥n</td>
            <td contenteditable="true" class="editable" oninput="PedidoCompraDetApp.marcarModificado(this)" th:text="${detalle.contratoCompra}">Contrato Compra</td>
            <td contenteditable="true" class="editable" oninput="PedidoCompraDetApp.marcarModificado(this)" th:text="${detalle.terminado}">Terminado</td>
            <td contenteditable="true" class="editable" oninput="PedidoCompraDetApp.marcarModificado(this)" th:text="${detalle.factProveedor}">Fact. Proveedor</td>
            <td contenteditable="true" class="editable" oninput="PedidoCompraDetApp.marcarModificado(this)" th:text="${detalle.n_fact_flete}">N¬∫ Fact. Flete</td>
            <td contenteditable="true" class="editable" oninput="PedidoCompraDetApp.marcarModificado(this)" th:text="${detalle.fechaPagoFleteFormatted}">Fecha Pago Flete</td>
            <td contenteditable="true" class="editable" oninput="PedidoCompraDetApp.marcarModificado(this)" th:text="${detalle.n_bl}">N¬∫ BL</td>
            <td contenteditable="true" class="editable" oninput="PedidoCompraDetApp.marcarModificado(this)" th:text="${detalle.pesoNetoTotal}">Peso Neto Total</td>
            <td contenteditable="true" class="editable" oninput="PedidoCompraDetApp.marcarModificado(this)" th:text="${detalle.totalBultos}">Total Bultos</td>
            <td contenteditable="true" class="editable" oninput="PedidoCompraDetApp.marcarModificado(this)" th:text="${detalle.promedio}">Promedio</td>
            <td contenteditable="true" class="editable" oninput="PedidoCompraDetApp.marcarModificado(this)" th:text="${detalle.valorCompraTotal}">Valor Compra Total</td>
            <td contenteditable="true" class="editable" oninput="PedidoCompraDetApp.marcarModificado(this)" th:text="${detalle.observaciones}">Observaciones</td>
        </tr>
        </tbody>
    </table>
</div>
<!-- Controles de Paginaci√≥n -->
<!-- Controles de Paginaci√≥n -->
<div class="pagination">
    <!-- Bot√≥n Primera P√°gina -->
    <span id="primera-pagina-span">
        <a id="primera-pagina" href="javascript:void(0);" onclick="PedidoCompraDetApp.irAPrimeraPagina()">Primera P√°gina</a>
    </span>

    <!-- Bot√≥n Anterior -->
    <span id="anterior-span">
        <a id="anterior-pagina" href="javascript:void(0);" onclick="PedidoCompraDetApp.irAPaginaAnterior()">Anterior</a>
    </span>

    <!-- Bot√≥n Siguiente -->
    <span id="siguiente-span">
        <a id="siguiente-pagina" href="javascript:void(0);" onclick="PedidoCompraDetApp.irAPaginaSiguiente()">Siguiente</a>
    </span>

    <!-- Bot√≥n √öltima P√°gina -->
    <span id="ultima-pagina-span">
        <a id="ultima-pagina" href="javascript:void(0);" onclick="PedidoCompraDetApp.irAUltimaPagina()">√öltima P√°gina</a>
    </span>
</div>
<script src="/js/sweet-alert2/dist/sweetalert2.all.min.js"></script>
<script type="module" src="/js/pedidos_compra_det.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
